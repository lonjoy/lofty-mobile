<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

	<title>lofty 前端基础框架</title>
	
	<!-- Demo页面自身所需的基本样式，全局Reset文件在demo-mobile.min.css中引入 --->
	<link href="http://loftyjs.com/fdevlib/static/css/lofty/demo-mobile.min.css" rel="stylesheet" />
	<link href="http://style.c.aliimg.com/m/lofty/ui/button/1.0/button.css" rel="stylesheet">
	
	
	<script src="http://style.c.aliimg.com/m/lofty/port/lofty.js"></script>
	<script src="http://style.c.aliimg.com/m/lofty/gallery/appframework/af.js"></script>
	
	<style>
		.demo-content input{
			margin:5px 3px;
			height:30px;
		}
	</style>
</head>

<body>

<p>
	<b style="color:red">运行此Demo前的准备：</b><br/>
	1.绑定本地的测试环境 host配置  127.0.0.1 test.1688.com<br/>
	2.在本地服务器的根目录创建 proxy文件夹，将代理页面 localstorage.html 放到proxy文件夹下<br/>
	   localstorage.html下载地址 http://style.c.aliimg.com/m/lofty/util/storage/1.0/proxy/localstorage.html
</p>
<p>本DEMO跨域操作 test.1688.com中的localStorage</p>

<div id="op_result" style="color:#ff7300;font-weight:700;padding:10px 5px"></div>

<div class="demo-content">
	<div class="demo-title">跨域写入.setItem()</div>
	<div class="demo-widget">
		<div class="demo-widget-dom">
			
			<div class="area">
			   <span>写入的key:</span><input type="text" id="key_input"></input><br/>
			   <span>写入的value:</span><input type="text" id="val_input"></input>
			   <br/>
			   <button class="fui-btn-action" id="setKeyVal">写入</button>
			</div>
			<script type="text/javascript">
				define(['util/storage/1.0','jquery'],function(localStorage,$){
					$("#setKeyVal").on('click',function(){
						localStorage.setItem($("#key_input").val(),$("#val_input").val(),{
							success:function(data){
								$("#op_result").html("写入成功！")
							},
							domain:"test.1688.com"
						})
					})
				})
			</script>
		
		</div>		
	</div>	
</div>

<div class="demo-content">
	<div class="demo-title">跨域读取.getItem()</div>
	<div class="demo-widget">
		<div class="demo-widget-dom">
			<div  class="area">
			   <span>读取key:</span><input type="text" id="key_read_input"></input>
			   <span>value:</span><span id="val_text"></span>
			   <br/>
			   <button class="fui-btn-action" id="getKeyVal">读取</button>
			</div>
			<script type="text/javascript">
				define(['util/storage/1.0','jquery'],function(localStorage,$){
					$("#getKeyVal").on('click',function(){
						localStorage.getItem($("#key_read_input").val(),{
							success:function(data){
								$("#op_result").html("读取成功！");
								$("#val_text").html(data)
							},
							domain:"test.1688.com"
						})
					})
				})
			</script>
		
		</div>		
	</div>	
</div>
<div class="demo-content">
	<div class="demo-title">获取第N个key的名字 .key()</div>
	<div class="demo-widget">
		<div class="demo-widget-dom">
			<div class="area">
			   <span>获取第</span><input type="text" id="key_index"></input>个key的名字：<span id="key_name"></span>
			   <br/>
			   <button class="fui-btn-action" id="getKeyName">获取key名字</button>
			</div>
			<script type="text/javascript">
				define(['util/storage/1.0','jquery'],function(localStorage,$){
					$("#getKeyName").on('click',function(){
						localStorage.key($("#key_index").val(),{
							success:function(data){
								$("#op_result").html("读取成功！");
								$("#key_name").html(data)
							},
							domain:"test.1688.com"
						})
					})
				})
			</script>
		
		</div>		
	</div>	
</div>
<div class="demo-content">
	<div class="demo-title">跨域清空 .clear()</div>
	<div class="demo-widget">
		<div class="demo-widget-dom">
			<div class="area">
			   <button class="fui-btn-action" id="clear">清空</button>
			</div>
			<script type="text/javascript">
				define(['util/storage/1.0','jquery'],function(localStorage,$){
					$("#clear").on('click',function(){
						localStorage.clear({
							success:function(data){
								$("#op_result").html("清空成功！");
							},
							domain:"test.1688.com"
						})
					})
				})
			</script>
		
		</div>		
	</div>	
</div>
<div class="demo-content">
	<div class="demo-title">跨域获取键值对的数量.length()</div>
	<div class="demo-widget">
		<div class="demo-widget-dom">
			<div class="area">
			   <span>数量：<span><span id="length"></span>
			   <br/>
			   <button class="fui-btn-action" id="getLength">获取存储的个数</button>
			</div>
			<script type="text/javascript">
				define(['util/storage/1.0','jquery'],function(localStorage,$){
					$("#setKeyVal").on('click',function(){
						$("#getLength").on('click',function(){
						localStorage.length({
							success:function(data){
								$("#op_result").html("获取个数成功！");
								$("#length").html(data);
							},
							domain:"test.1688.com"
						})
					})
					})
				})
			</script>
		
		</div>		
	</div>	
</div>
<div class="demo-content">
	<div class="demo-title">跨域删除 .removeItem()</div>
	<div class="demo-widget">
		<div class="demo-widget-dom">
			<div class="area">
			   <span>删除的key</span><input type="text" id="remove_key"></input>
			   <br/>
			   <button class="fui-btn-action" id="removeBtn">删除某个key</button>
			</div>
			<script type="text/javascript">
				define(['util/storage/1.0','jquery'],function(localStorage,$){
					$("#removeBtn").on('click',function(){
						localStorage.removeItem($("#remove_key").val(),{
							success:function(data){
								$("#op_result").html("删除成功");
							},
							domain:"test.1688.com"
						})
					})
				})
			</script>
		
		</div>		
	</div>	
</div>
<!-- Demo页面自身所需的JS，实际项目中无需引入 --->
<script src="http://loftyjs.com/fdevlib/static/js/lofty/demo.min.js" type="text/javascript"></script>	
</body>
</html>