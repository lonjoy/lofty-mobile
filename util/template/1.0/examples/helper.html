<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

	<title>lofty 前端基础框架</title>
	<!-- Demo页面自身所需的基本样式，全局Reset文件在demo.min.css中引入 --->
	<link href="http://loftyjs.com/fdevlib/static/css/lofty/demo-mobile.min.css" rel="stylesheet" />
		
	<script src="http://style.c.aliimg.com/m/lofty/port/lofty.js"></script>
	<script src="http://style.c.aliimg.com/m/lofty/gallery/appframework/af.js"></script>

</head>

<body>
 <div class="demo-content">
 <div class="demo-widget">
  <div class="demo-widget-dom">	
 
<div id="content"></div>
<script id="test" type="text/html">
<%=$ubb2html(text)%>
</script>

<script type="text/javascript">

	define(['util/template/1.0'],function(Template){
		Template.helper('$ubb2html', function (content) {
			return content
			.replace(/\[b\]([^\[]*?)\[\/b\]/igm, '<b>$1</b>')
			.replace(/\[i\]([^\[]*?)\[\/i\]/igm, '<i>$1</i>')
			.replace(/\[u\]([^\[]*?)\[\/u\]/igm, '<u>$1</u>')
			.replace(/\[url=([^\]]*)\]([^\[]*?)\[\/url\]/igm, '<a href="$1">$2</a>')
			.replace(/\[img\]([^\[]*?)\[\/img\]/igm, '<img src="$1" />');
		});

		// 如果要访问 Math 则：template.helper('Math', Math)

		var data = {
			text: '我是辅助方法[b]加粗[/b]的'
		};
		var html = Template.render('test', data);
		document.getElementById('content').innerHTML = html;


	});
	
</script>	

  </div>		
 </div>	
</div>
  
<!-- Demo页面自身所需的JS，实际项目中无需引入 --->
<script src="http://loftyjs.com/fdevlib/static/js/lofty/demo.min.js" type="text/javascript"></script>	
</body>
</html>
